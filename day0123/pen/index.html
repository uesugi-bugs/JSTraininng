<!DOCTYPE>
<html>
	<head>
		<meta charset="utf-8">
		<title>jsLesson</title>
	</head>
	<body>
		<button class="select">赤を持つ</button>
		<button class="select">緑を持つ</button>
		<button class="select">青を持つ</button>
		<button onclick="writePen()">書く</button>
		<p id="info"></p>
		<div id="penbox"></div>
	<script>
		const bts=document.querySelectorAll('.select');
		const info=document.getElementById('info');
		let box=document.getElementById('penbox');

		class ColorPen{
			constructor(color,length,colorCode){
				this.color=color;
				this.length=length;
				this.colorCode=colorCode;
			}
			write(){
				let msg="";
				if(this.length<=0){
					msg='もう書けません';
				}else{
					this.length-=0.5;
					msg=this.color+'で書いた。残りの長さ'+this.length;
				}
				return msg;
			}
		}
		let pens=[
			new ColorPen('赤',10,'red'),
			new ColorPen('緑',10,'green'),
			new ColorPen('青',10,'blue')
		];
		let pen=null;
		for(let i=0;i<bts.length;i++){
			bts[i].addEventListener('click',(eve)=>{
				pen=pens[i];
				info.textContent=pen.color+'を持った。';
				showPen();
			});
		}
		const writePen=()=>{
			let msg='';
			if(pen==null){
				msg='ペンを持ってください!';
			}else{
				msg=pen.write();
			}
			info.textContent=msg;
			showPen();
		};

		function showPen(){
				box.textContent=pen.length+'cm';
				box.style.width=pen.length+'cm';
				box.style.backgroundColor=pen.colorCode;
				box.style.color='yellow';
		}

		
	</script>
	</body>
</html>
